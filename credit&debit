#include <cs50.h>
#include <stdio.h>
#include <string.h>
int checksum(string st);
int main(void)
{
    long card1=get_long("Enter card number: ");
    char card[30];
    sprintf(card,"%li",card1);
    int a=checksum(card);
    if (a==0)
    {
        printf("INVALID1\n");
    }
    else if (((card[0]=='3' && card[1]=='4')||(card[0]=='3' && card[1]=='7')) && strlen(card)==15)
    {
        printf("AMEX\n");
    }
    else if (((card[0]=='5') && (card[1]=='1' || card[1]=='2' || card[1]=='3' || card[1]=='4' || card[1]=='5')) && strlen(card)==16)
    {
        printf("MASTERCARD\n");
    }
    else if (card[0]=='4' && (strlen(card)==14 || strlen(card)==16))
    {
        printf("VISA\n");
    }
    else
    {
        printf("INVALID\n");
    }
}
int checksum(string st)
{
    int sum=0;
    for(int i=strlen(st)-2;i>=0;i-=2)
    {
        char dig3[5];
        int dig1=(st[i]-'0')*2;
        sprintf(dig3,"%i",dig1);
        for (int k=0;k<strlen(dig3);k+=1)
        {
            int dig4=dig3[k]-'0';
            printf("%i\n",dig4);
            sum+=(int)dig4;
        }
    }
    for(int j=strlen(st)-1;j>=0;j-=2)
    {
        int dig2= (st[j]-'0');
        printf("%i\n",dig2);
        sum=sum+(int)dig2;
    }
    printf("%i\n",sum);
    if (sum%10==0)
    {
        return 1;
    }
    else
    {
        return 0;
    }
}
